:root {
   /* colors */
   --main-background: #e9e9f3;
   --main-color: #1e1e29;
   --card-background: #ffffff;
   --outline-color: #d0d0e2;
   --border-color: #7d60e7;
   --inner-card-background: #eeeeff;

   /* text */
   --card-color: #1b1b2d;
   --card-color-pastel: #7171b9;
   --inner-card-color: #1b1b2d;
   --special-color: #7a6ff4;
   --disabled-color: #91919c;
   --error-color: #be7f7f;
   --font-weight-thin: 300;
   --font-weight-normal: 450;
   --font-weight-semibold: 640;
   --font-weight-bold: 760;
   --font-weight-extrabold: 860;

   /* buttons */
   --button-height: 40px;
   --button-padding: 16px;
   --button-background-hover: #eeeeff;
   --button-background-active: #ddddff;

   /* dimensions */
   --card-radius: 32px;
   --card-padding: 16px 20px;
   --card-gap: 8px;
   --inner-card-gap: 4px;
   --inner-card-radius: 16px;
   --inner-card-padding: 8px;
   --sidebar-width: 80px;

   /* transition */
   --transition-duration: 0.2s;
   --transition-opts: var(--transition-duration) ease;

   /* calendar */
   --calendar-day-size: 30px;
   --calendar-gap: 4px;
   --calendar-font-size: 0.85rem;

   @media (prefers-reduced-motion: reduce) {
      --transition-opts: none;
   }
}

:root {
   font-family: Inter, sans-serif;
   font-feature-settings: 'liga' 1, 'calt' 1, "ss01" 1, "sso4" 1, "cs01" 1, "cv06" 1, "cv08" 1, "cv10" 1, "cv11" 1, "cv13" 1;
   font-weight: var(--font-weight-normal);

   @supports (font-variation-settings: normal) {
      font-family: InterVariable, sans-serif;
   }

   & ::selection {
      background-color: var(--card-color-pastel);
      color: var(--card-background);
   }
}

body {
   display: flex;
   flex-direction: row;
   background: var(--main-background);
   color: var(--main-color);
   margin: 0;
}

#sidebar {
   height: 100vh;
   width: var(--sidebar-width);
}

main {
   margin: 8px;
   display: flex;
   flex-direction: column;
   flex: 1;
}

button {
   all: initial;
   font: inherit;
   color: inherit;
   cursor: pointer;

   &:disabled {
      pointer-events: none;
      opacity: 0.5;
   }
}

.card {
   background-color: var(--card-background);
   color: var(--card-color);
   border-radius: var(--card-radius);
   padding: var(--card-padding);
   display: flex;
   flex-direction: column;
   flex: 1;

   & .title {
      font-size: 1.2rem;
      font-weight: var(--font-weight-semibold);
      letter-spacing: .02rem;
      margin: 0;

      &#logoTitle {
         font-size: 1.8rem;
         font-weight: var(--font-weight-semibold);
         display: flex;
         align-items: center;
         gap: 4px;
         padding-inline: 8px;
      }
   }
}

.inner-card {
   background: var(--inner-card-background);
   color: var(--inner-card-color);
   border-radius: var(--inner-card-radius);
   padding: var(--inner-card-padding);
}

#topbar {
   display: flex;
   align-items: center;
   padding-bottom: 8px;
   border-bottom: 1px solid var(--outline-color);

   & ul {
      margin-inline-start: auto;
      margin-block: 0;
      padding: 0;
      display: flex;
      list-style: none;
      gap: 12px;

      & button {
         display: flex;
         align-items: center;
         padding-inline: var(--button-padding);
         height: var(--button-height);
         gap: 8px;
         border-radius: calc(var(--button-height) / 2);
         transition: background-color var(--transition-opts);

         &:hover {
            background-color: var(--button-background-hover);
         }

         &.active {
            background-color: var(--button-background-active);
         }
      }
   }
}

#content {
   display: flex;
   gap: var(--card-gap);
   flex: 1;
   padding-top: 12px;

   & .calendar-container {
      display: flex;
      flex-direction: column;
      gap: 8px;
      height: fit-content;

      & .calendar-head {
         display: flex;
         align-items: center;
         justify-content: space-between;
         position: relative;

         & .calendar-head-title {
            font-size: 1.4rem;
            line-height: 1.5;

            & #currentMonth {
               font-weight: var(--font-weight-bold);
            }

            & #currentYear {
               font-weight: var(--font-weight-thin);
            }
         }

         & button {
            height: var(--button-height);
            width: var(--button-height);
            border-radius: calc(var(--button-height) / 2);
            text-align: center;
            line-height: 1.8;
            transition: background-color var(--transition-opts);

            &:hover {
               background-color: var(--button-background-active);
            }
         }
      }

      & .calendar-body {

         & .calendar-body-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: var(--font-weight-semibold);
            margin-bottom: 8px;
            padding-inline: var(--calendar-gap);
         }

         & .calendar-body-grid {
            display: flex;
            flex-direction: column;
            gap: var(--calendar-gap);
            background-color: var(--card-background);
            padding: var(--calendar-gap);
            border-radius: calc(var(--inner-card-radius) - var(--inner-card-padding));
            overflow: clip;

            &.fade-right .week {
               transform: translate(0);

               @starting-style {
                  transform: translateX(-500px);
               }

            }

            &.fade-left .week {
               transform: translateX(0);

               @starting-style {
                  transform: translateX(500px);
               }

            }

         }

         & span {
            width: var(--calendar-day-size);
            height: var(--calendar-day-size);
            font-size: var(--calendar-font-size);
            border-radius: calc(var(--calendar-day-size) / 2);
            display: flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
         }

         & .week {
            display: flex;
            border-radius: calc(var(--calendar-day-size) / 2 + 4px);
            gap: calc(var(--calendar-gap) / 2);
            box-sizing: border-box;
            border: 2px solid transparent;
            transition: background-color var(--transition-opts), border-color var(--transition-opts), transform .2s cubic-bezier(.08, .82, .17, 1);
         }

         & .day {
            cursor: pointer;
            user-select: none;
            border: 2px solid transparent;
            border-radius: calc(var(--calendar-day-size) / 2 + 4px);
            transition: background-color var(--transition-opts), border-color var(--transition-opts);

            & span {
               transition: background-color var(--transition-opts);
            }

            &.holiday {
               color: var(--error-color);
               font-weight: var(--font-weight-thin);
            }

            &.prev,
            &.next {
               color: var(--disabled-color);
            }
         }
      }
   }

   & .timetable-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--card-gap);

      & .timetable-header {
         display: flex;
         gap: var(--card-gap);

         & .inner-card {
            width: fit-content;
            box-sizing: border-box;
         }

         & #reset {
            border-radius: calc(var(--button-height) / 2);
            height: var(--button-height);
            max-width: var(--button-height);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color var(--transition-opts), max-width var(--transition-opts);
            background-color: var(--button-background-hover);
            overflow: clip;
            justify-content: start;

            & i {
               min-width: var(--button-height);
               text-align: center;
            }

            & span {
               text-wrap: nowrap;
               padding-inline-end: var(--button-padding);
               opacity: 0;
               transition: opacity var(--transition-opts);
            }

            &:hover {
               background-color: var(--button-background-active);
               max-width: 200px;

               & span {
                  opacity: 1;
               }
            }
         }

         & #options {
            margin-inline-start: auto;

            & label {
               display: flex;
               flex-direction: column;
               justify-content: end;
               align-items: center;
               height: 100%;
               background-color: var(--inner-card-background);
               border-radius: var(--inner-card-radius);
               padding: var(--inner-card-padding);
               box-sizing: border-box;
               color: var(--inner-card-color);

               gap: var(--inner-card-gap);

               & span {
                  font-size: 14px;
                  font-weight: var(--font-weight-semibold);
               }
            }

            & #confidence {
               -webkit-appearance: none;
               appearance: none;
               background: transparent;
               width: 120px;
               margin: 2px 6px;

               &::-webkit-slider-runnable-track,
               &::-moz-range-track {
                  background: var(--button-background-active);
                  height: 4px;
                  border-radius: 2px;
               }

               &::-webkit-slider-thumb,
               &::-moz-range-thumb {
                  -webkit-appearance: none;
                  appearance: none;
                  width: 12px;
                  height: 12px;
                  background: var(--border-color);
                  border: none;
                  border-radius: 6px;
                  cursor: pointer;
                  box-shadow: 0 1px 6px -2px black;
               }
            }
         }
      }

      & .timetable-body {
         display: flex;
         flex-direction: column;
         flex: 1;

         & #timetable {
            --inner-card-background:
               linear-gradient(#fcfaff, #faf8ff) padding-box,
               linear-gradient(#eeeeff, #eeeeee) border-box;
            flex: 1;
            display: flex;
            gap: calc(var(--inner-card-gap));

            & .day {
               position: relative;
               display: flex;
               flex-direction: row;
               gap: var(--inner-card-gap);
               flex: 1;

               & .inner-card {
                  flex: 1;
                  border: 1px solid transparent;
                  box-shadow: 0 6px 20px -16px #000000aa;
               }

               &#templateDay {
                  display: none;
               }
            }
         }
      }
   }

   &[view="day"] {

      & #timetableWeekHeader,
      #timetableMonthHeader {
         display: none;
      }

      #timetableDayHeader {
         display: grid;
         text-transform: uppercase;
         font-size-adjust: ex-height .7;
         line-height: 1;
         padding: 12px 16px;
         gap: 4px;

         & .day {
            font-size: 1rem;
            text-align: center;
            font-weight: var(--font-weight-thin);
            grid-row: 1;
            grid-column: 1;
            align-self: end;
            text-align: end;
         }

         & .month {
            font-size: 1rem;
            grid-row: 2;
            grid-column: 1;
            align-self: end;
            text-align: end;
            font-weight: var(--font-weight-bold);
         }

         & .date {
            font-size: 2.6rem;
            grid-row: span 2;
            grid-column: 2;
            color: var(--special-color);
            font-weight: var(--font-weight-extrabold);
         }
      }

      & .day {

         &:hover span {
            background-color: var(--button-background-hover);
         }

         &.active {
            border-color: var(--border-color);
            box-sizing: border-box;

            & span {
               background-color: var(--button-background-active);
            }

            &.today {
               border-color: transparent;
               background-color: var(--border-color);
            }
         }

         &.today span {
            background-color: var(--card-color-pastel);
            color: var(--inner-card-background);
         }
      }
   }

   &[view="week"] {

      & #timetableDayHeader,
      #timetableMonthHeader {
         display: none;
      }

      #timetableWeekHeader {
         display: grid;
         text-transform: uppercase;
         font-size-adjust: ex-height .7;
         line-height: 1;
         padding: 12px 16px;
         border-radius: 100vh;

         & .start-month {
            font-size: 1rem;
            grid-row: 1;
            grid-column: 1;
            align-self: end;
            text-align: end;
            font-weight: var(--font-weight-bold);
            padding-bottom: 4px;
         }

         & .end-month {
            font-size: 1rem;
            grid-row: 2;
            grid-column: 1;
            align-self: end;
            text-align: end;
            font-weight: var(--font-weight-thin);
            height: 1rem;
         }

         & .start-date {
            padding-left: 4px;
            font-size: 2.6rem;
            grid-row: span 2;
            grid-column: 2;
            color: var(--special-color);
            font-weight: var(--font-weight-extrabold);
         }

         & .dash {
            font-size: 2rem;
            grid-row: span 2;
            grid-column: 3;
            align-self: end;
            font-weight: var(--font-weight-normal);
            color: var(--card-color-pastel);
            line-height: 1.3;
         }

         & .end-date {
            font-size: 1.8rem;
            grid-row: span 2;
            grid-column: 4;
            align-self: end;
            font-weight: var(--font-weight-semibold);
            color: var(--card-color-pastel);
            line-height: 1.2;
         }
      }

      #timetable {
         & .logs-view {
            position: absolute;
            inset: 0;
            background: transparent;
            border: none;
            pointer-events: none;

            & div {
               pointer-events: all;
            }
         }
      }

      & .week {
         cursor: pointer;

         &:hover {
            background-color: var(--button-background-hover);
            border-color: var(--card-background)
         }

         &:has(.active) {
            border-color: var(--border-color);
            background-color: var(--button-background-active);
         }

         & .today span {
            background-color: var(--card-color-pastel);
            color: var(--inner-card-background);
         }
      }
   }

   &[view="month"] {

      & #timetableDayHeader,
      #timetableWeekHeader {
         display: none;
      }
   }
}